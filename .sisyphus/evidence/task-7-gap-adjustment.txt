TASK 7: Phase 1 Drop Algorithm - Gap Adjustment Tests
=======================================================

Test 1: test_positive_gap_catches_up_shared
Status: PASSED

Configuration:
- Gold Shared: level 10/100 (0.10 progression)
- Blue Shared: level 30/100 (0.30 progression)
- Unique cards: 2 cards at level 8/10 (0.80 progression)
- Streak state: zero streaks

Algorithm Calculation:
1. Progression Scores:
   - SShared = (0.10 + 0.30) / 2 = 0.20
   - SUnique = 0.80
   - Gap = 0.80 - 0.20 = 0.60 (positive = unique ahead)

2. Gap Adjustment (GAP_BASE = 1.5):
   - WShared = 0.70 * (1.5^0.60) = 0.70 * 1.348 = 0.944
   - WUnique = 0.30 * (1.5^-0.60) = 0.30 * 0.742 = 0.223

3. Normalize:
   - Total = 0.944 + 0.223 = 1.167
   - ProbShared = 0.944 / 1.167 = 0.809 (80.9%)
   - ProbUnique = 0.223 / 1.167 = 0.191 (19.1%)

Expected: ProbShared > 0.75 (system catches up shared)
Result: TEST PASSED (observed ~80.9%)

---

Test 2: test_negative_gap_catches_up_unique
Status: PASSED

Configuration:
- Gold Shared: level 80/100 (0.80 progression)
- Blue Shared: level 80/100 (0.80 progression)
- Unique cards: 2 cards at level 2/10 (0.20 progression)
- Streak state: zero streaks

Algorithm Calculation:
1. Progression Scores:
   - SShared = (0.80 + 0.80) / 2 = 0.80
   - SUnique = 0.20
   - Gap = 0.20 - 0.80 = -0.60 (negative = shared ahead)

2. Gap Adjustment (GAP_BASE = 1.5):
   - WShared = 0.70 * (1.5^-0.60) = 0.70 * 0.742 = 0.519
   - WUnique = 0.30 * (1.5^0.60) = 0.30 * 1.348 = 0.404

3. Normalize:
   - Total = 0.519 + 0.404 = 0.923
   - ProbShared = 0.519 / 0.923 = 0.562 (56.2%)
   - ProbUnique = 0.404 / 0.923 = 0.438 (43.8%)

Expected: ProbUnique > 0.35 (system catches up unique)
Result: TEST PASSED (observed ~43.8%)

---

Verification: Gap adjustment correctly balances progression by exponentially
increasing probability for the category that's falling behind (GAP_BASE = 1.5).
